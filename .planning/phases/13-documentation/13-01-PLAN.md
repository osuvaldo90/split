---
phase: 13-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [README.md, docs/architecture.md]
autonomous: true

must_haves:
  truths:
    - "Developer can set up local environment by following README"
    - "Developer understands key architectural patterns from docs"
    - "Documentation explains the 'why' behind design decisions"
  artifacts:
    - path: "README.md"
      provides: "Quick start guide and local setup instructions"
      contains: "ANTHROPIC_API_KEY"
    - path: "docs/architecture.md"
      provides: "Architecture overview and key patterns"
      contains: "claims"
  key_links:
    - from: "README.md"
      to: "docs/architecture.md"
      via: "link to deeper documentation"
      pattern: "docs/architecture"
---

<objective>
Create developer documentation for the Split bill-splitting app.

Purpose: Help future contributors understand and work with the codebase quickly without reading all the code.
Output: README.md for quick start + docs/architecture.md for deeper patterns.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-documentation/13-CONTEXT.md

# Key codebase files to reference for documentation content:
@convex/schema.ts
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create README.md with quick start guide</name>
  <files>README.md</files>
  <action>
Create README.md at project root with:

1. **Project title and one-line description**
   - "Split - Real-time collaborative bill splitting"

2. **Features section** (bullet points)
   - Receipt OCR via Claude API
   - Real-time sync (Convex)
   - Shareable 6-char codes
   - Collaborative item claiming
   - Tax/tip calculation

3. **Tech Stack section**
   - React 19 + TypeScript
   - Vite + TailwindCSS v4
   - Convex (real-time backend)
   - Claude API (OCR)

4. **Quick Start section**
   ```
   # Clone and install
   npm install

   # Set up Convex (first time)
   npx convex dev

   # Run development server
   npm run dev
   ```

5. **Environment Variables section**
   - `ANTHROPIC_API_KEY` - Required for receipt OCR
   - Where to get it: console.anthropic.com
   - Create `.env.local` with the key

6. **Project Structure section** (brief)
   - `src/` - React frontend
   - `convex/` - Backend functions and schema
   - `docs/` - Architecture documentation

7. **Link to docs/architecture.md** for deeper dive

Keep it concise - no more than 100 lines. Focus on getting running quickly.
  </action>
  <verify>cat README.md shows complete documentation with all sections</verify>
  <done>README.md exists with quick start, environment setup, and link to architecture docs</done>
</task>

<task type="auto">
  <name>Task 2: Create docs/architecture.md with key patterns</name>
  <files>docs/architecture.md</files>
  <action>
Create docs/architecture.md with:

1. **Overview section**
   - Mobile-first bill splitting app
   - Real-time collaborative editing
   - No authentication - session codes provide access

2. **Data Model section**
   - Sessions: Bill-splitting events with 6-char code
   - Participants: People in a session (host vs regular)
   - Items: Line items from receipt (price in cents)
   - Claims: Links participants to items (supports splitting)
   - Diagram or description of relationships

3. **Key Patterns section**

   a) **Claims model**
   - Multiple participants can claim same item
   - Price split equally among claimants
   - Unclaimed items show warning but don't block

   b) **Real-time sync (Convex)**
   - All data changes broadcast automatically
   - Queries are reactive - UI updates on any change
   - No manual polling or WebSocket management

   c) **Draft state for new items**
   - New items created locally first
   - Only saved to DB when user finishes editing
   - Prevents empty items appearing to other users

   d) **Participant verification pattern**
   - participantId stored in localStorage
   - Verified on session load before allowing actions
   - Host identified by isHost flag in participants table

   e) **Money handling**
   - All prices in cents (integers)
   - Avoids floating point issues
   - Format with `(price / 100).toFixed(2)` for display

   f) **Proportional distribution**
   - Tax/tip distributed by share of subtotal
   - Uses distributeWithRemainder helper for exact totals
   - First N claimants get extra cent for odd divisions

4. **Security Model section**
   - Session codes as access control boundary
   - Authorization checks on mutations (host-only vs all)
   - Input validation with bounds
   - See SECURITY-AUDIT.md for full audit

5. **Key Files Reference**
   - convex/schema.ts - Data model
   - convex/calculations.ts - Tax/tip distribution
   - convex/validation.ts - Input validation helpers
   - src/components/Summary.tsx - Per-person totals
   - src/components/ClaimableItem.tsx - Item claiming UI

Keep focused on patterns unique to this app. Don't explain generic React/Convex concepts.
  </action>
  <verify>cat docs/architecture.md shows complete documentation with all key patterns</verify>
  <done>docs/architecture.md exists with data model, key patterns, and security overview</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] README.md exists at project root
- [ ] docs/architecture.md exists
- [ ] README links to architecture docs
- [ ] Key patterns documented (claims, real-time, draft state, money handling)
</verification>

<success_criteria>

- Both documentation files created
- README provides working quick start instructions
- Architecture doc explains the "why" behind key patterns
- Documentation is concise and maintainable
</success_criteria>

<output>
After completion, create `.planning/phases/13-documentation/13-01-SUMMARY.md`
</output>
