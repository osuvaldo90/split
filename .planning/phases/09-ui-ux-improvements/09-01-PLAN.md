---
phase: 09-ui-ux-improvements
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/components/ReceiptCapture.tsx, src/components/InlineItem.tsx, src/pages/Session.tsx, src/components/TaxTipSettings.tsx]
autonomous: true
---

<objective>
Refine UI/UX with unified receipt upload, consistent edit layouts, and compact spacing.

Purpose: Improve mobile UX by consolidating buttons, fixing layout wrapping, and reducing wasted vertical space.
Output: Cleaner, more compact interface that feels polished on mobile devices.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/components/ReceiptCapture.tsx
@src/components/InlineItem.tsx
@src/components/ClaimableItem.tsx
@src/pages/Session.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Unify receipt upload buttons into single action</name>
  <files>src/components/ReceiptCapture.tsx</files>
  <action>
Replace two separate buttons ("Take Photo" and "Upload Image") with a single "Add Receipt" button that uses a standard file input accepting images. On mobile, the native file picker automatically offers camera capture as an option alongside photo library. This is simpler than a custom action sheet and leverages native OS behavior.

Implementation:
1. Remove cameraInputRef and its dedicated input element
2. Keep only fileInputRef with `accept="image/*"` (no `capture` attribute - let OS decide)
3. Replace both buttons with single "Add Receipt" button
4. Keep the existing upload logic unchanged (handleFileSelect, generateUploadUrl, etc.)

The single input without `capture="environment"` will still offer camera on mobile (iOS/Android show camera option in picker), while on desktop it opens file browser. This is standard mobile web behavior.
  </action>
  <verify>npm run build succeeds, component renders single button, file picker opens on click</verify>
  <done>Single "Add Receipt" button replaces two buttons, native picker handles camera vs file selection</done>
</task>

<task type="auto">
  <name>Task 2: Align InlineItem edit layout with ClaimableItem pattern</name>
  <files>src/components/InlineItem.tsx</files>
  <action>
InlineItem still uses `sm:flex-row` responsive approach which can cause awkward wrapping on mid-sized screens. Update to match ClaimableItem's consistent stacked layout pattern (established in 08-02).

Implementation:
1. Change edit mode from `flex-col sm:flex-row` responsive to always stacked (flex-col)
2. Row 1: Name input (full width)
3. Row 2: Price input + Quantity (if > 1) + Delete button (pushed right with flex-1 spacer)
4. Row 3: Cancel + Save buttons (flex-1 each for equal width)
5. Remove sm: breakpoint classes from edit mode layout

This ensures consistent behavior across all screen sizes, matching the ClaimableItem component.
  </action>
  <verify>npm run build succeeds, edit mode shows consistent 3-row layout at all widths</verify>
  <done>InlineItem edit mode uses same stacked layout pattern as ClaimableItem</done>
</task>

<task type="auto">
  <name>Task 3: Reduce vertical spacing throughout Session page</name>
  <files>src/pages/Session.tsx, src/components/TaxTipSettings.tsx</files>
  <action>
Audit and reduce excessive vertical spacing for a more compact mobile interface.

Changes in Session.tsx:
1. "Who's Here" section: Change `mb-4` to `mb-3`
2. "Receipt" section: Change `mb-4` to `mb-3`
3. "Items" section: Change `mb-4` to `mb-3`
4. Inside receipt states (uploading, processing, error): Change `py-8` to `py-6`
5. Items list container: `space-y-1` is already tight, keep as-is
6. "Add Item" button: Change `mt-3` to `mt-2`
7. Items total divider: Change `mt-3 pt-3` to `mt-2 pt-2`

Changes in TaxTipSettings.tsx:
1. Change top-level `space-y-6` to `space-y-4` (tighter section spacing)
2. Tip preview border: Change `mt-4 pt-3` to `mt-3 pt-2`
3. Grand total breakdown: Change `mt-2` to `mt-1.5`
4. Keep input elements at 44px min-height for touch targets

The goal is tighter spacing without sacrificing readability or touch target sizes.
  </action>
  <verify>npm run build succeeds, visual inspection shows more compact layout without cramped feel</verify>
  <done>Vertical spacing reduced by ~25% throughout Session page, UI feels more compact</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds without errors
- [ ] npm run lint passes
- [ ] ReceiptCapture shows single button that opens native file picker
- [ ] InlineItem edit mode displays consistently stacked at all screen widths
- [ ] Session page sections have reduced vertical margins
- [ ] Touch targets remain at least 44px
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript or linting errors introduced
- UI feels more compact and polished on mobile
</success_criteria>

<output>
After completion, create `.planning/phases/09-ui-ux-improvements/09-01-SUMMARY.md`
</output>
