# Phase 10.1: Bug Fixes and UX - Context

**Gathered:** 2026-01-15
**Status:** Ready for planning

<vision>
## How This Should Work

**Tax Calculation Fix:**
Tax should be distributed proportionally based on each person's claimed items relative to the total bill subtotal — not relative to total claimed items.

Example: Bill has $48 subtotal, $4.80 tax. If osvi claims $20 in items and other claims $28:
- osvi's tax = ($20/$48) × $4.80 = $2.00
- other's tax = ($28/$48) × $4.80 = $2.80

If some items are unclaimed, the tax on those items isn't assigned to anyone. So if only osvi claimed $20 out of $48 total:
- osvi's tax = ($20/$48) × $4.80 = $2.00
- other's tax = $0 (claimed nothing)
- Unassigned tax = $2.80 (belongs to unclaimed items)

**Home Page Join Flow:**
Combine join bill into the home page for one-screen simplicity. A "Join Bill" button expands to reveal the code input — keeps the screen clean until needed. The separate Join Bill page gets removed entirely.

</vision>

<essential>
## What Must Be Nailed

- **Correct math** — Tax proportional to claimed items vs total subtotal, not vs total claimed. People need to trust the numbers.
- **One-screen simplicity** — Bill history and join code input on the same home page, no extra navigation.

</essential>

<specifics>
## Specific Ideas

- Tax formula: `participantTax = (participantClaimedSubtotal / billSubtotal) × totalTax`
- Join code input hidden behind "Join Bill" button that expands on tap
- Remove JoinBill.tsx page entirely — all join functionality on home page

</specifics>

<notes>
## Additional Context

The current bug was identified through screenshots:
1. When no items claimed: tax splits evenly (wrong — should be $0 each)
2. When items claimed by both: tax proportional to claimed amounts (correct)
3. When one person claims all: they get 100% of tax (wrong — should be proportional to their share of total subtotal)

Priority is correct math over UX improvements. Trust in the numbers is essential.

</notes>

---

*Phase: 10.1-bug-fixes-ux*
*Context gathered: 2026-01-15*
