---
phase: 04-real-time-sync
plan: 03
type: execute
wave: 2
depends_on: ["04-01", "04-02"]
files_modified: []
autonomous: false
---

<objective>
Verify all real-time sync features work correctly with human testing.

Purpose: Phase context emphasizes "Reliability over speed" - visual verification ensures the real-time UX works as expected in practice.
Output: Human verification that all Phase 4 features work correctly.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/04-real-time-sync/04-CONTEXT.md
@.planning/phases/04-real-time-sync/04-01-SUMMARY.md
@.planning/phases/04-real-time-sync/04-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete real-time sync UX: session persistence, join notifications, and connection status</what-built>
  <how-to-verify>
## Test 1: Session Persistence
1. Run: `npm run dev`
2. Create a new session from home page
3. Upload a receipt (any image works)
4. Open a new incognito/private window
5. Go to /join and enter the session code
6. Enter a name and join
7. Close the incognito tab
8. Re-open incognito, go to /join, enter same code
9. **Expected**: Should auto-redirect to session without asking for name again

## Test 2: Join Notifications
1. Keep the original session page open
2. Open another browser/incognito window
3. Join the session with a different name
4. **Expected**: Original window shows "Name joined" toast that fades after ~3 seconds
5. Try joining with a third name from another window
6. **Expected**: Toast appears for each new joiner

## Test 3: Connection Status
1. On the session page, open browser DevTools
2. Go to Network tab and toggle "Offline" mode
3. **Expected**: Banner appears showing "Connection lost" or "Reconnecting..."
4. Toggle offline mode off
5. **Expected**: Banner shows "Reconnecting..." briefly, then disappears
6. All data should remain intact

## Test 4: Initial Load (No False Toasts)
1. Refresh the session page
2. **Expected**: No join toasts appear for participants already in session
3. Only new joins after page load should trigger toasts
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All human verification tests pass
- [ ] No regressions in existing functionality
</verification>

<success_criteria>

- All verification tests pass
- User approves real-time sync behavior
- No issues reported
</success_criteria>

<output>
After completion, create `.planning/phases/04-real-time-sync/04-03-SUMMARY.md`
</output>
