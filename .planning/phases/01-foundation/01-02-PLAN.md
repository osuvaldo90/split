---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/App.tsx
  - src/pages/Home.tsx
  - src/pages/Session.tsx
  - src/pages/Join.tsx
  - src/components/Layout.tsx
  - package.json
autonomous: true
---

<objective>
Create routing structure and base layout components for the mobile-first Split app.

Purpose: Establish the page structure and navigation patterns that all features will use. Mobile-first layout ensures the primary use case (restaurant table splitting) works well from the start.

Output: Working routes for home, session, and join pages with a consistent mobile-first layout shell.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md

# Reference prior plan for project structure
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Set up React Router with core routes</name>
  <files>package.json, src/App.tsx, src/pages/Home.tsx, src/pages/Session.tsx, src/pages/Join.tsx</files>
  <action>
1. Install react-router-dom:
   `npm install react-router-dom`

2. Create page directory and placeholder pages:

src/pages/Home.tsx:
```tsx
export default function Home() {
  return (
    <div className="p-4">
      <h1 className="text-2xl font-bold">Split</h1>
      <p className="text-gray-600 mt-2">Split bills with friends, instantly.</p>
    </div>
  );
}
```

src/pages/Session.tsx:
```tsx
import { useParams } from "react-router-dom";

export default function Session() {
  const { code } = useParams<{ code: string }>();

  return (
    <div className="p-4">
      <h1 className="text-2xl font-bold">Session: {code}</h1>
      <p className="text-gray-600 mt-2">Session view placeholder</p>
    </div>
  );
}
```

src/pages/Join.tsx:
```tsx
export default function Join() {
  return (
    <div className="p-4">
      <h1 className="text-2xl font-bold">Join Session</h1>
      <p className="text-gray-600 mt-2">Enter a session code to join</p>
    </div>
  );
}
```

3. Update App.tsx with routing:
```tsx
import { BrowserRouter, Routes, Route } from "react-router-dom";
import Layout from "./components/Layout";
import Home from "./pages/Home";
import Session from "./pages/Session";
import Join from "./pages/Join";

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Layout />}>
          <Route index element={<Home />} />
          <Route path="session/:code" element={<Session />} />
          <Route path="join" element={<Join />} />
        </Route>
      </Routes>
    </BrowserRouter>
  );
}

export default App;
```

AVOID: Don't add authentication routing - we're using anonymous sessions. Don't create nested route structures yet - keep flat for now.
  </action>
  <verify>
- `npm run dev` starts without errors
- Navigating to `/` shows Home page
- Navigating to `/session/ABC123` shows Session page with code
- Navigating to `/join` shows Join page
- No TypeScript errors
  </verify>
  <done>React Router configured with home, session, and join routes.</done>
</task>

<task type="auto">
  <name>Task 2: Create mobile-first Layout component</name>
  <files>src/components/Layout.tsx</files>
  <action>
1. Create the Layout component that wraps all pages:

src/components/Layout.tsx:
```tsx
import { Outlet } from "react-router-dom";

export default function Layout() {
  return (
    <div className="min-h-screen bg-gray-50">
      {/* Mobile-first container - max width for tablet/desktop */}
      <div className="mx-auto max-w-md min-h-screen bg-white shadow-sm">
        {/* Header */}
        <header className="sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-3">
          <h1 className="text-lg font-semibold text-gray-900">Split</h1>
        </header>

        {/* Main content area */}
        <main className="pb-safe">
          <Outlet />
        </main>
      </div>
    </div>
  );
}
```

2. Add safe-area utility to tailwind.config.js for iOS notch handling:
```js
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      padding: {
        'safe': 'env(safe-area-inset-bottom)',
      },
    },
  },
  plugins: [],
}
```

3. Update index.html to include viewport meta for mobile:
```html
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
```

The layout uses:
- max-w-md (448px) to constrain width on larger screens
- Centered container with shadow for visual separation
- Sticky header for consistent navigation
- Safe area padding for iOS devices with notches

AVOID: Don't add a bottom navigation bar yet - we'll evaluate if needed later. Don't add complex header with back buttons - keep minimal.
  </action>
  <verify>
- Layout renders with centered container on desktop
- On mobile viewport, layout fills the screen
- Header stays sticky when scrolling
- All routes render inside the layout correctly
- No horizontal scrolling on mobile viewports
  </verify>
  <done>Mobile-first Layout component created with sticky header and safe-area handling.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All routes accessible and rendering correct content
- [ ] Layout applies consistently across all pages
- [ ] Mobile viewport (375px) renders correctly without overflow
- [ ] Desktop viewport shows centered container with shadow
- [ ] `npm run build` succeeds without errors
- [ ] No console warnings about missing route elements
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Routing works for all defined paths
- Layout is mobile-first with appropriate desktop scaling
- Foundation ready for feature-specific components
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
