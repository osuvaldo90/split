# Milestone v1.0: MVP

**Status:** ✅ SHIPPED 2026-01-15
**Phases:** 1-13 (including decimal phases 2.1, 3.1, 5.1, 10.1, 10.2)
**Total Plans:** 34

## Overview

Build a mobile-first real-time bill splitting web app from foundation through polish. Start with project setup, integrate OCR for receipt capture, establish real-time sync infrastructure, implement collaborative item claiming, build calculation logic for tax/tip distribution, and refine the mobile UX for seamless restaurant use.

## Phases

### Phase 1: Foundation

**Goal**: Establish project structure, build tooling, and base architecture for a mobile-first web app
**Depends on**: Nothing (first phase)
**Plans**: 3 plans

Plans:
- [x] 01-01: Project initialization and tooling setup
- [x] 01-02: Base component architecture and routing
- [x] 01-03: Data models and state management foundation

**Details:**
- Vite + React + TypeScript setup
- Convex backend integration
- TailwindCSS v4 with mobile-first styling
- iOS safe-area handling

### Phase 2: Receipt Processing

**Goal**: Enable receipt capture via camera/upload and extract line items using OCR
**Depends on**: Phase 1
**Plans**: 3 plans

Plans:
- [x] 02-01: Camera capture and file upload UI
- [x] 02-02: OCR integration and line item extraction
- [x] 02-03: Receipt parsing and error correction UI

**Details:**
- Native file input with capture attribute
- Claude Vision (claude-sonnet-4-5-20250514) for OCR
- Convex file storage for receipt images

### Phase 2.1: Receipt Fixes (INSERTED)

**Goal**: Fix bugs and improvements discovered during Phase 2 before moving to session management
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:
- [x] 02.1-01: Receipt upload replace and money formatting
- [x] 02.1-02: Quantity item splitting in OCR

**Details:**
- Receipt upload replaces items instead of appending
- Money formatting: $4.8 → $4.80
- Quantity splitting: 2 Pilsner $13 → 2x Pilsner $6.50

### Phase 3: Session Management

**Goal**: Generate shareable codes/QR, enable session creation and joining with display names
**Depends on**: Phase 2.1
**Plans**: 3 plans

Plans:
- [x] 03-01: Session creation and code generation
- [x] 03-02: Share code display with copy functionality
- [x] 03-03: Join session flow with display name entry

**Details:**
- 6-character alphanumeric codes
- QR code generation
- Case-insensitive name comparison

### Phase 3.1: Inline Item Editing (INSERTED)

**Goal**: Remove confirm step and enable collaborative inline item editing for all participants
**Depends on**: Phase 3
**Plans**: 1 plan

Plans:
- [x] 03.1-01: Remove confirm step and inline item editing

**Details:**
- Items save directly to DB after OCR
- Any participant can edit items
- InlineItem uses mutations directly

### Phase 4: Real-Time Sync

**Goal**: Enhance real-time UX with session persistence, join notifications, and connection status
**Depends on**: Phase 3.1
**Plans**: 3 plans

Plans:
- [x] 04-01: Participant session persistence (localStorage auto-rejoin)
- [x] 04-02: Join notifications and connection status indicator
- [x] 04-03: Visual verification of real-time features

**Details:**
- Store participantId in localStorage
- Toast notifications for joins
- Connection lost detection

### Phase 5: Item Management

**Goal**: Enable claiming/unclaiming items with real-time updates, support shared item splitting
**Depends on**: Phase 4
**Plans**: 2 plans

Plans:
- [x] 05-01: Item claiming and unclaiming
- [x] 05-02: Visual distinction and host powers

**Details:**
- Blue border for claimed items
- Host can remove claims from others
- stopPropagation for nested interactions

### Phase 5.1: Fix New Item Broadcast (INSERTED)

**Goal**: Hide new items from other users until saved with actual content
**Depends on**: Phase 5
**Plans**: 1 plan

Plans:
- [x] 05.1-01: Fix new item broadcast

**Details:**
- Draft items use local React state
- One draft at a time
- Prevents empty item confusion

### Phase 6: Calculation Engine

**Goal**: Calculate per-person totals with proportional tax distribution and flexible tip options
**Depends on**: Phase 5.1
**Plans**: 3 plans

Plans:
- [x] 06-01: Proportional tax distribution logic
- [x] 06-02: Tip calculation (% subtotal, % subtotal+tax, manual)
- [x] 06-03: Per-person total aggregation

**Details:**
- distributeWithRemainder helper for exact totals
- Math.floor + remainder to first N claimants
- Three tip modes

### Phase 7: Summary & Display

**Goal**: Show final totals screen, original receipt image, and unclaimed item warnings
**Depends on**: Phase 6
**Plans**: 1 plan

Plans:
- [x] 07-01: Receipt image viewer modal

**Details:**
- Modal for receipt image viewing
- Unclaimed items warning

### Phase 8: Polish & Optimization

**Goal**: Refine mobile UX, handle edge cases, optimize performance for restaurant use
**Depends on**: Phase 7
**Plans**: 3 plans

Plans:
- [x] 08-01: Mobile UX polish and responsiveness
- [x] 08-02: Edge case handling and error states
- [x] 08-03: Performance optimization

**Details:**
- Stacked vertical layout for edit mode
- Ring animation for update flash
- User-friendly error language

### Phase 9: UI/UX Improvements

**Goal**: Consolidate receipt upload UI, improve edit form layout, and reduce vertical spacing
**Depends on**: Phase 8
**Plans**: 1 plan

Plans:
- [x] 09-01: UI/UX refinements (unified receipt upload, edit layout, spacing)

**Details:**
- Two explicit buttons: Take Photo / Choose Image
- Consistent 3-row stacked layout
- ~25% reduction in vertical spacing

### Phase 10: Feature Enhancements

**Goal**: Rename sessions to bills, add auto-gratuity detection, improve multi-item UX, and add bill history
**Depends on**: Phase 9
**Plans**: 3 plans

Plans:
- [x] 10-01: Auto-gratuity detection
- [x] 10-02: Bill history on home screen
- [x] 10-03: Session-to-bill terminology rename

**Details:**
- Gratuity stored in cents, distributed proportionally
- Max 10 bill history entries
- Always-visible gratuity section

### Phase 10.1: Bug Fixes and UX (INSERTED)

**Goal**: Fix tax distribution calculation and streamline home page UX
**Depends on**: Phase 10
**Plans**: 2 plans

Plans:
- [x] 10.1-01: Fix tax distribution to use bill subtotal
- [x] 10.1-02: Combine join bill into home page

**Details:**
- Phantom entry for unclaimed in distribution
- Calculate billSubtotal separately
- Expandable section for join flow

### Phase 10.2: Join Bill UI Simplification (INSERTED)

**Goal**: Unify home page form with single name field, optional code, and smart button adaptation
**Depends on**: Phase 10.1
**Plans**: 1 plan

Plans:
- [x] 10.2-01: Unified form with smart button adaptation

**Details:**
- Single name state for create/join
- Code field always visible but optional
- Name pre-filled from localStorage

### Phase 11: Security Review

**Goal**: Comprehensive security audit and hardening of the application
**Depends on**: Phase 10
**Plans**: 1 plan

Plans:
- [x] 11-01: Comprehensive security audit (authorization, validation, exposure)

**Details:**
- Categorized intentional design vs security gaps
- localStorage trust model acceptable
- Prioritized HIGH/MEDIUM fixes

### Phase 12: Security Hardening

**Goal**: Fix high and medium priority security issues identified in the Phase 11 audit
**Depends on**: Phase 11
**Plans**: 4 plans

Plans:
- [x] 12-01: HIGH priority authorization fixes (updateName, unclaim)
- [x] 12-02: Host-only restrictions (settings, destructive item ops)
- [x] 12-03: Input validation bounds (names, money, quantities)
- [x] 12-04: Receipt URL session verification

**Details:**
- Name limit 100 chars, item name 200 chars
- Money max $100k, quantity max 999
- Centralized validation in validation.ts

### Phase 13: Documentation

**Goal**: Add developer documentation (README + architecture docs) for quick onboarding
**Depends on**: Phase 12
**Plans**: 1 plan

Plans:
- [x] 13-01: Developer documentation (README + architecture)

**Details:**
- Concise README focused on quick start (86 lines)
- Architecture doc explains 'why' not 'what'

---

## Milestone Summary

**Decimal Phases:**
- Phase 2.1: Receipt Fixes (inserted after Phase 2 for urgent bug fixes)
- Phase 3.1: Inline Item Editing (inserted after Phase 3 for UX improvement)
- Phase 5.1: Fix New Item Broadcast (inserted after Phase 5 for bug fix)
- Phase 10.1: Bug Fixes and UX (inserted after Phase 10 for tax calculation fix)
- Phase 10.2: Join Bill UI Simplification (inserted after Phase 10.1 for UX refinement)

**Key Decisions:**
- Claude Vision for OCR (best cost/accuracy balance)
- Convex for real-time (zero-config WebSockets)
- Prices in cents (avoid floating point issues)
- Draft items in local state (prevent broadcast of empty items)
- distributeWithRemainder for exact totals
- localStorage trust model (acceptable for low-stakes use case)

**Issues Resolved:**
- Receipt upload appending instead of replacing
- Empty items broadcasting to all users
- Tax distribution using group subtotal instead of bill subtotal
- OCR quantity items not being split
- Authorization gaps on mutations

**Issues Deferred:**
- Host user removal (pending todo)
- Native share sheet (pending todo)
- Bottom tabs navigation (pending todo)
- First-time tutorial (pending todo)

**Technical Debt Incurred:**
- None significant — clean v1.0 implementation

---

_For current project status, see .planning/ROADMAP.md_
